"use client"

import React, { useRef } from 'react';
import { motion, useInView } from 'framer-motion';

const AnimatedSignature: React.FC = () => {
  const ref = useRef(null);
  const isVisible = useInView(ref, { once: true });

  const draw = {
    hidden: {
      opacity: 0,
      pathLength: 0,
    },
    visible: {
      opacity: 1,
      pathLength: 1,
      transition: {
        pathLength: {
          delay: 0.2,
          type: "spring" as const,
          duration: 2.5,
          bounce: 0.2,
        },
        opacity: { duration: 2 },
      },
    },
  };

  const drawDot = {
    hidden: {
      opacity: 0,
      pathLength: 0,
    },
    visible: {
      opacity: 1,
      pathLength: 1,
      transition: {
        pathLength: {
          delay: 1.5,
          type: "spring" as const,
          duration: 0.5,
          bounce: 0.3,
        },
        opacity: { delay: 1.5, duration: 0.3 },
      },
    },
  };

  return (
    <motion.div ref={ref} className="w-full max-w-2xl mx-auto scale-110 md:scale-120">
      <motion.svg 
        width="100%" 
        height="auto" 
        viewBox="0 0 169 80" 
        fill="none" 
        xmlns="http://www.w3.org/2000/svg"
        initial="hidden"
        animate={isVisible ? 'visible' : 'hidden'}
        className="w-full h-auto min-w-[300px] max-w-[600px]"
      >
        <motion.path 
          d="M26.2744 36.5128C26.299 36.4622 26.3272 41.0595 29.2572 43.8349C31.7625 46.208 37.984 33.5272 42.2039 27.9074C46.4238 22.2876 48.8749 19.764 50.4525 18.2349C52.0302 16.7058 52.6601 16.2477 53.0885 16.1593C53.5169 16.0709 53.7248 16.3662 53.7714 17.1325C53.8181 17.8989 53.6972 19.1274 52.7695 22.402C51.8418 25.6766 50.1109 30.96 50.498 31.7393C50.8851 32.5185 53.4425 28.6336 56.0778 25.1491C58.7131 21.6645 61.3486 18.698 63.1129 16.843C64.8773 14.9879 65.6905 14.3342 66.3252 13.94C66.96 13.5459 67.3917 13.431 67.5505 13.926C67.7093 14.421 67.5821 15.5295 64.0303 26.7684C60.4785 38.0073 53.5059 59.3432 49.8959 70.1711C46.2859 80.9991 46.2498 80.6726 47.8249 74.8364C49.4 69.0001 52.5874 57.664 55.0143 49.836C57.4412 42.008 59.0111 38.0316 60.6728 34.4358C62.3345 30.8399 64.0405 27.7452 65.8965 25.1962C69.3487 20.4551 73.5655 17.9671 76.9613 16.8456C78.4646 16.3491 79.7128 16.7194 80.7335 17.3057C81.7541 17.8921 82.5584 18.867 83.0034 20.268C83.9837 23.3543 82.4218 27.2217 79.4096 31.0931C77.7463 33.2308 75.0127 35.0359 70.4862 37.875C65.9597 40.7141 59.5196 44.3577 56.3663 46.2377C53.2129 48.1177 53.5417 48.1236 56.9519 46.6873C60.3621 45.251 66.8439 42.3723 70.6155 40.6117C75.3116 38.4196 76.6513 37.3076 76.8851 37.6155C80.4703 42.3373 73.3564 44.7855 73.3052 45.567C73.2849 45.8773 73.7151 45.9633 74.6351 45.4367C75.555 44.9102 77.0639 43.7561 79.1317 41.6953C81.1994 39.6346 83.7803 36.7023 89.1651 27.5346C94.5499 18.3668 102.66 3.05248 103.965 1.19237C105.27 -0.667744 99.5239 11.3905 96.206 18.6525C92.8881 25.9146 92.1726 28.0151 91.6496 29.7932C90.7247 32.9376 90.4096 35.3315 90.4437 36.8871C90.4577 37.521 90.9074 37.7908 91.8529 37.2489C92.7984 36.7069 94.3393 35.3326 99.4993 29.0988C104.659 22.865 113.392 11.8134 117.731 6.68269C122.07 1.552 121.752 2.67717 117.94 10.8824C114.128 19.0876 106.833 34.3387 106.214 38.9638C105.424 44.8596 118.173 30.8596 117.176 32.8848C116.367 34.5283 114.851 37.3763 115.888 38.0096C119.956 40.4933 125.308 34.9137 127.205 34.3699C130.054 33.5531 134.51 31.8476 139.413 29.6243C141.453 28.6992 142.66 28.36 117.665 33.488C92.6695 38.6159 41.4546 49.2656 17.7797 53.4614C-5.89509 57.6571 -0.477842 55.0762 9.54299 51.2156C19.5638 47.355 34.0241 42.2928 50.584 37.7669C67.1439 33.2411 85.3652 29.4049 100.956 26.8012C116.547 24.1975 128.955 22.9425 137.502 22.3012C146.05 21.66 150.36 21.6704 154.095 21.8429C157.829 22.0154 160.856 22.3497 163.058 22.7715C165.26 23.1934 166.545 23.6928 167.869 24.2073" 
          stroke="currentColor" 
          strokeWidth="2" 
          strokeLinecap="round"
          variants={draw}
        />
        <motion.path 
          d="M140.1724 16H140" 
          stroke="currentColor" 
          strokeWidth="2" 
          strokeLinecap="round"
          variants={drawDot}
        />
      </motion.svg>
    </motion.div>
  );
};

export default AnimatedSignature;
